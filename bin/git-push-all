#!/bin/bash

for repo in $(find . -name ".git" -type d | rev | cut -c 6- | rev); do
    echo "$repo:"
    git -C "$repo" ls-remote >/dev/null 2>&1
    if [ $? -eq 0 ]; then
        if [ -n "$(git -C "$repo" log @{u}..)" ]; then
            git -C "$repo" log --date=short @{u}..
            git -C "$repo" push
        else
            echo "No changes to push"
        fi
    else
        echo "No (accessible) remote"
    fi
    echo
done
