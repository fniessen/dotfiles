#!/bin/bash

# Only merges current branch, apparently.

# See https://stackoverflow.com/questions/17099564/make-a-shell-script-to-update-3-git-repos
# See https://medium.com/@codenameyau/updating-multiple-repos-with-one-command-9768c8cdfe46
for repo in $(find . -name ".git" -type d | rev | cut -c 6- | rev); do
    echo "Updating $repo:"
    # git -C $repo pull                 # Does not do anything if unstaged changes!
    git -C $repo remote update --prune  # Delete old branches. Good!
    git -C $repo merge --ff-only @{u}
    echo
done
